(function(){var a=!1,b=/xyz/.test(function(){})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(c){function d(){!a&&this.init&&this.init.apply(this,arguments)}var e=this.prototype;a=!0;var f=new this;a=!1;for(var g in c)f[g]="function"==typeof c[g]&&"function"==typeof e[g]&&b.test(c[g])?function(a,b){return function(){var c=this._super;this._super=e[a];var d=b.apply(this,arguments);this._super=c;return d}}(g,c[g]):c[g];d.prototype=f;d.prototype.constructor=d;d.extend=arguments.callee;
return d}})();var Notification=function(a,b,c){var d="undefined"==typeof b?null:b,e="undefined"==typeof c?null:c;this.getName=function(){return a};this.getBody=function(){return d};this.getType=function(){return e};this.setBody=function(a){d=a};this.setType=function(a){e=a};this.toString=function(){return"Notification "+a+" "+e}};var Observer=function(a,b){this.object=a;this.callback=b};Observer.prototype.constructor=Observer;Observer.prototype.sendNotification=function(a){this.callback.call(this.object,a)};var Notifier=Class.extend({init:function(){this.observers={}},hasObserverKey:function(a){return this.observers.hasOwnProperty(a)},removeObserverKey:function(a){delete this.observers[a]},getObserverKeys:function(){var a=[],b;for(b in this.observers)a.push(b);return a},hasObserver:function(a,b){if(!this.hasObserverKey(a))return!1;for(var c=!1,d=this.observers[a],e=d.length,f;-1<--e;)if(f=d[e],b.object==f.object&&b.callback==f.callback){c=!0;break}return c},registerObserver:function(a,b,c){b=new Observer(b,
c);this.hasObserver(a,b)||(this.hasObserverKey(a)||(this.observers[a]=[]),this.observers[a].push(b))},removeObserver:function(a,b,c){if(this.hasObserverKey(a)){for(var d=this.observers[a],e=d.length,f;-1<--e;)if(f=d[e],f.object==b&&f.callback==c){d.splice(e,1);break}0==d.length&&this.removeObserverKey(a)}},removeObservers:function(a){var b,c;if(a="undefined"==typeof a?!1:a)this.hasObserverKey(a)&&this.removeObserverKey(a);else{b=this.getObserverKeys();for(c=b.length;-1<--c;)a=b[c],this.removeObserverKey(a)}},
forwardNotification:function(a){this.hasObserverKey(a.getName())&&this._sendNotification(a)},sendNotification:function(a,b,c){this.hasObserverKey(a)&&this._sendNotification(new Notification(a,b,c))},_sendNotification:function(a){for(var b=this.observers[a.getName()],c=b.length,d,e=[];-1<--c;)d=b[c],e.push(d);for(c=e.length;-1<--c;)d=e[c],d.sendNotification(a)}});
